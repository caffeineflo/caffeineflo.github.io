<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="ESP8266 Special: Apple&#39;s HomeKit is now for everyone!"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@caffeineflo"/>



  	<meta property="og:title" content="ESP8266 Special: Apple&#39;s HomeKit is now for everyone! &middot; [self writeBlog];" />
  	<meta property="og:site_name" content="[self writeBlog];" />
  	<meta property="og:url" content="https://iflorian.com/esp8266-weather-station-homekit-special/" />

    
        
            <meta property="og:image" content="/images/cover_small.jpg"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2017-06-21T11:20:26-04:00" />

    
    <meta property="article:tag" content="esp8266" />
    
    <meta property="article:tag" content="dht11" />
    
    <meta property="article:tag" content="dht22" />
    
    <meta property="article:tag" content="homekit" />
    
    <meta property="article:tag" content="mqtt" />
    
    <meta property="article:tag" content="homekit2mqtt" />
    
    

    <title>ESP8266 Special: Apple&#39;s HomeKit is now for everyone! &middot; [self writeBlog];</title>

    
    <meta name="description" content="Two weeks ago Apple held it&amp;rsquo;s annual WWDC keynote announcing the latest updates to their platforms and technologies. The keynote lasted over 2 hours and y" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/images/favicon.ico">
	  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/css/nav.css" />

    

    
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/xcode.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
        
        <script>hljs.initHighlightingOnLoad();</script>
    

    
      
          <link href="/index.xml" rel="alternate" type="application/rss+xml" title="[self writeBlog];" />
      
      
    
    <meta name="generator" content="Hugo 0.54.0" />

    <link rel="canonical" href="https://iflorian.com/esp8266-weather-station-homekit-special/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": ,
        "logo": https://iflorian.com/images/logo_inverted.png
    },
    "author": {
        "@type": "Person",
        "name": ,
        
        "image": {
            "@type": "ImageObject",
            "url": https://iflorian.com/images/logo_inverted.png,
            "width": 250,
            "height": 250
        }, 
        
        "url": https://iflorian.com/,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "headline": ESP8266 Special: Apple&#39;s HomeKit is now for everyone!,
    "name": ESP8266 Special: Apple&#39;s HomeKit is now for everyone!,
    "wordCount": 670,
    "timeRequired": "PT4M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": https://iflorian.com/esp8266-weather-station-homekit-special/,
    "datePublished": 2017-06-21T11:20Z,
    "dateModified": 2017-06-21T11:20Z,
    
    "keywords": esp8266, dht11, dht22, homekit, mqtt, homekit2mqtt,
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": https://iflorian.com/esp8266-weather-station-homekit-special/
    }
}
    </script>
    


    

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-86325185-1', 'auto');
      ga('send', 'pageview');

    </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/">My Blog</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/euc">EUC</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/about">About me</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/contact">Contact</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head" style="background-image: url(/images/cover_small.jpg)">
  <nav class="main-nav overlay clearfix">


  
      <a class="blog-logo" href="https://iflorian.com/"><img src="/images/logo_inverted.png" alt="Home" /></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
  <div class="vertical">
      <div class="main-header-content inner">
          
    <a class="bloglogo" href="https://www.linkedin.com/in/caffeineflo" target="_blank">
        <span class="icon-linkedin" style="color:white;font-size:2em"></span>
    </a>
&nbsp;



    <a class="bloglogo" href="https://github.com/caffeineflo" target="_blank">
    <span class="icon-github" style="color:white;font-size:2em"></span>
    </a>
&nbsp;





    <a class="bloglogo" href="https://twitter.com/caffeineflo" target="_blank">
        <span class="icon-twitter" style="color:white;font-size:2em"></span>
    </a>
&nbsp;












          <h1 class="page-title">[self writeBlog];</h1>
          <h2 class="page-description"></h2>
      </div>
  </div>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">ESP8266 Special: Apple&#39;s HomeKit is now for everyone!</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-06-21T11:20:26-04:00">
            Jun 21, 2017
          </time>
        
         
          <span class="post-tag small"><a href="https://iflorian.com//tags/esp8266/">#esp8266</a></span>
         
          <span class="post-tag small"><a href="https://iflorian.com//tags/dht11/">#dht11</a></span>
         
          <span class="post-tag small"><a href="https://iflorian.com//tags/dht22/">#dht22</a></span>
         
          <span class="post-tag small"><a href="https://iflorian.com//tags/homekit/">#homekit</a></span>
         
          <span class="post-tag small"><a href="https://iflorian.com//tags/mqtt/">#mqtt</a></span>
         
          <span class="post-tag small"><a href="https://iflorian.com//tags/homekit2mqtt/">#homekit2mqtt</a></span>
         
        </section>
    </header>

    <section class="post-content">
      <p>Two weeks ago Apple held it&rsquo;s annual WWDC keynote announcing the latest updates to their platforms and technologies. The keynote lasted over 2 hours and you might would think that in that much time they have touched at least all technologies on the surface, but one thing especially seemed to have been missing almost entirely. HomeKit!</p>

<p>While Apple seemed to have not shown too much love to that topic during their Keynote, it seems as if they still have given that technology quite some thought leading up to WWDC as Apple quietly made quite a few changes.</p>

<p>Most notably Apple opened up their HomeKit specs outside their MFi (Made for iPhone) program. If you&rsquo;re a registered developer with Apple you won&rsquo;t have to Google the specs anymore and rely on 3rd party info about HomeKit.</p>

<p>Next in line are their changes to HomeKit&rsquo;s requirements. Up until this point you had to have Apple&rsquo;s Co-Processor á ka security chip installed in your HomeKit hardware to be able to produce HomeKit enabled hardware. They also dropped this, essentially removing licensing fees when releasing HomeKit hardware and making the process easier. Authentication that was done with Apple&rsquo;s coprocessor can now be done via software authentication. You would still have to go through the MFi program if you intend to sell and publish HomeKit soft-/hardware but you would no longer have to buy Apple&rsquo;s coprocess and pay licensing fees for those.</p>

<p>Personally, I value these two changes the most and think they&rsquo;ll have a great impact in the availability of HomeKit enabled devices in the future.</p>

<p>Apart from that, Apple introduced changes to the featureset of their HomeKit platform, adding two new product categories (sprinklers and faucets), enhancements to the sunrise and sunset scenarios and adding temperature triggers.</p>

<p>This all might seem like basic stuff that doesn&rsquo;t change much for us developers but it shows that Apple is aware of the huge IoT market and it&rsquo;s potential.</p>

<p>To show off what this could potentially mean, let me bring back my ESP8266 based weather station that I introduce in my latest blog post installment <a href="https://iflorian.com/esp8266-weather-station-part-1">here</a>, <a href="https://iflorian.com/esp8266-weather-station-part-2">part II</a> and <a href="https://iflorian.com/esp8266-weather-station-part-3">part III</a>.</p>

<p>Let&rsquo;s say we wanted to sell this weather station as a real product. After all, hardware costs are very minimal and the software is top notch, but we would want to add HomeKit support so Siri could pick up the temperature from our Weather Station when asked. If we wanted to do this before Apple&rsquo;s HomeKit changes we would have had to apply for their MFi program, acquire Apple&rsquo;s co-processors and after we would have done all that the biggest hurdle would have been to pay licensing to Apple which would have probably killed our product.</p>

<p>Now with these changes we could simply prototype HomeKit support ourselves. A good point to start off would be this GitHub <a href="https://github.com/hobbyquaker/homekit2mqtt/wiki">project</a> that we could connect to our MQTT server we&rsquo;ve setup before, add a config for our weather station by creating a homekit2mqtt.json file with the following contents:</p>

<pre><code class="language-json">{
	&quot;TemperatureSensor&quot;: {
		&quot;service&quot;: &quot;TemperatureSensor&quot;,
		&quot;name&quot;: &quot;TemperatureSensor&quot;,
		&quot;topic&quot;: {
			&quot;statusTemperature&quot;: &quot;weather/temperature&quot;
		},
		&quot;manufacturer&quot;: &quot;Generic&quot;,
		&quot;model&quot;: &quot;TemperatureSensor&quot;
	}
}
</code></pre>

<p>Now all we have to do is to run the homekit2mqtt bridge and we can start to use our weather station with HomeKit.</p>

<p>If our server runs and the connection can be made, we can start to add accessory in HomeKit:</p>

<p><img src="/images/2017/06/PairMQTTBridge.PNG" alt="HomeKit Pair MQTT Bridge" /></p>

<p>The accessory is configured by default to be behind a bridge. Next is the actual temperature sensor:</p>

<p><img src="/images/2017/06/PairTemperatureSensor.PNG" alt="HomeKit Pair Temperature Sensor" /></p>

<p>Once we&rsquo;ve added that, our temperature sensor should show up in our accessory list:</p>

<p><img src="/images/2017/06/HomeKitEquipment.PNG" alt="HomeKit Showing Temperature Sensor" /></p>

<p>And we can ask Siri for the temperature in the room we&rsquo;ve assigned the sensor to:</p>

<p><img src="/images/2017/06/AskingSiri.PNG" alt="HomeKit Siri Query" /></p>

<p>HomeKit integration was that easy and if we really would plan to sell our weather station including HomeKit integration we could start to implement HomeKit without the homekit2mqtt bridge according to the HomeKit Specification that Apple released and start the MFi process afterwards.</p>

<p>Apple really did a great thing here making HomeKit integration easier! I&rsquo;m excited to see more equipment integrating with HomeKit soon!</p>

    </section>


  <footer class="post-footer">


    








<figure class="author-image">
    <a class="img" href="https://iflorian.com/" style="background-image: url(/images/florianharr_thumb.jpg)"><span class="hidden">Florian Harr's Picture</span></a>
</figure>


<section class="author">
  <h4><a href="https://iflorian.com/">Florian Harr</a></h4>
  
  <p>Read <a href="https://iflorian.com/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Atlanta, USA &#43; Stuttgart, Germany</span>
    <span class="author-link icon-link"><a href="https://iflorian.com/">https://iflorian.com/</a></span>
  </div>
</section>




    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=ESP8266%20Special%3a%20Apple%27s%20HomeKit%20is%20now%20for%20everyone%21&nbsp;-&nbsp;%5bself%20writeBlog%5d%3b&amp;url=https%3a%2f%2fiflorian.com%2fesp8266-weather-station-homekit-special%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fiflorian.com%2fesp8266-weather-station-homekit-special%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fiflorian.com%2fesp8266-weather-station-homekit-special%2f&amp;description=ESP8266%20Special%3a%20Apple%27s%20HomeKit%20is%20now%20for%20everyone%21"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fiflorian.com%2fesp8266-weather-station-homekit-special%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "https:\/\/iflorian.com\/esp8266-weather-station-homekit-special\/";  
this.page.identifier = "https:\/\/iflorian.com\/esp8266-weather-station-homekit-special\/"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://iflorian.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>








  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="background-image: url(/images/2017/07/360iDev.png)" href="/360idev2017-denver/">
          <section class="post">
              <h2>Join me at 360iDev - The Leading Indie iOS/macOS Developer Conference</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="/setup-git-remote-publishing/">
          <section class="post">
              <h2>Setup Git Push To Securly Update Your Website</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="/imprint">Imprint</a> • <a href="">[self writeBlog];</a> • All rights reserved - 2017</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
    
</body>
</html>

