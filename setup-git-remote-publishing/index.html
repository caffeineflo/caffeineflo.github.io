<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Setup Git Push To Securly Update Your Website | [self writeBlog];</title>
<meta name="keywords" content="Git, push, .git">
<meta name="description" content="
üìù Note: This post was published in 2017. While the core git concepts remain valid, modern deployment practices often favor SSH keys over passwords, GitHub Actions for automation, or managed deployment platforms. This approach is still functional but represents one of several deployment strategies available today.

I have recently reported about my new website and the workflow I am using. More specifically about Hugo and GitHub pages.
One task GitHub Pages solves perfectly is the need to publish changes. GitHub Pages does that automatically for you, which is one reason I chose it in first place. Due to the limitations on https with custom domains though, I decided to self host my HTML pages once more.">
<meta name="author" content="Florian Harr">
<link rel="canonical" href="https://iflorian.com/setup-git-remote-publishing/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7a798bee3c08158f2ab5c87cad44e192b44f1a9f6625a4a82d811696d8a67786.css" integrity="sha256-enmL7jwIFY8qtch8rUThkrRPGp9mJaSoLYEWltimd4Y=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://iflorian.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://iflorian.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://iflorian.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://iflorian.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://iflorian.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://iflorian.com/setup-git-remote-publishing/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({ startOnLoad: true, theme: 'default' });
  mermaid.contentLoaded();
</script>
<meta property="og:url" content="https://iflorian.com/setup-git-remote-publishing/">
  <meta property="og:site_name" content="[self writeBlog];">
  <meta property="og:title" content="Setup Git Push To Securly Update Your Website">
  <meta property="og:description" content=" üìù Note: This post was published in 2017. While the core git concepts remain valid, modern deployment practices often favor SSH keys over passwords, GitHub Actions for automation, or managed deployment platforms. This approach is still functional but represents one of several deployment strategies available today.
I have recently reported about my new website and the workflow I am using. More specifically about Hugo and GitHub pages.
One task GitHub Pages solves perfectly is the need to publish changes. GitHub Pages does that automatically for you, which is one reason I chose it in first place. Due to the limitations on https with custom domains though, I decided to self host my HTML pages once more.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2017-06-13T20:05:33-04:00">
    <meta property="article:modified_time" content="2017-06-13T20:05:33-04:00">
    <meta property="article:tag" content="Git">
    <meta property="article:tag" content="Push">
    <meta property="article:tag" content=".Git">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Setup Git Push To Securly Update Your Website">
<meta name="twitter:description" content="
üìù Note: This post was published in 2017. While the core git concepts remain valid, modern deployment practices often favor SSH keys over passwords, GitHub Actions for automation, or managed deployment platforms. This approach is still functional but represents one of several deployment strategies available today.

I have recently reported about my new website and the workflow I am using. More specifically about Hugo and GitHub pages.
One task GitHub Pages solves perfectly is the need to publish changes. GitHub Pages does that automatically for you, which is one reason I chose it in first place. Due to the limitations on https with custom domains though, I decided to self host my HTML pages once more.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://iflorian.com/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Setup Git Push To Securly Update Your Website",
      "item": "https://iflorian.com/setup-git-remote-publishing/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Setup Git Push To Securly Update Your Website",
  "name": "Setup Git Push To Securly Update Your Website",
  "description": " üìù Note: This post was published in 2017. While the core git concepts remain valid, modern deployment practices often favor SSH keys over passwords, GitHub Actions for automation, or managed deployment platforms. This approach is still functional but represents one of several deployment strategies available today.\nI have recently reported about my new website and the workflow I am using. More specifically about Hugo and GitHub pages.\nOne task GitHub Pages solves perfectly is the need to publish changes. GitHub Pages does that automatically for you, which is one reason I chose it in first place. Due to the limitations on https with custom domains though, I decided to self host my HTML pages once more.\n",
  "keywords": [
    "Git", "push", ".git"
  ],
  "articleBody": " üìù Note: This post was published in 2017. While the core git concepts remain valid, modern deployment practices often favor SSH keys over passwords, GitHub Actions for automation, or managed deployment platforms. This approach is still functional but represents one of several deployment strategies available today.\nI have recently reported about my new website and the workflow I am using. More specifically about Hugo and GitHub pages.\nOne task GitHub Pages solves perfectly is the need to publish changes. GitHub Pages does that automatically for you, which is one reason I chose it in first place. Due to the limitations on https with custom domains though, I decided to self host my HTML pages once more.\nAnd so I changed my setup once again. I didn‚Äôt fully drop GitHub Pages, but I redirect the GitHub Pages site to https://iflorian.com through their CNAME option under GitHub Pages -\u003e Settings and I serve the same content just from there.\nNow this brings back exactly the problem I just said GitHub Pages would solve, so I have to solve this problem myself.\nThe Easy Path The easiest path I could choose would be to directly push into the publishing folder of my webserver by adding the remote repo as a git remote and push to it. If there wouldn‚Äôt be this one problem ‚Ä¶\nI recently read this article ‚ÄúDon‚Äôt publicly expose .git or how we downloaded your website‚Äôs sourcecode - An analysis of Alexa‚Äôs 1M‚Äù on Internetwache.org that nicely shows an issue that is often overlooked when having your website under version control.\nWhile my website is publicly available on my GitHub account including the git history, you normally wouldn‚Äôt want to expose that in case of a normal homepage setup - and after all, if we don‚Äôt need to, why would we expose our git data on a website?\nThis is when I found this great writing on this topic: How To Set Up Automatic Deployment with Git with a VPS It has two small minor errors, which is why I want to quickly show how to do the same thing and fix what I just mentioned.\nPushing Website Updates via Git First you want to clone your repo somewhere safe on your server:\ngit clone https://github.com/caffeineflo/repo.git Next, you want to configure git hooks to checkout your HTML files to the directory your webserver is serving:\ncd /path/repo/.git/hooks/ vi post-receive Now you‚Äôve opened the post-receive hook, the script you put in here will be executed post receiving a push:\n#!/bin/sh git --work-tree=/path/www --git-dir=/path/repo/.git checkout -f The path you put in under the ‚Äìwork-tree parameter is your webserver directory and the ‚Äìgit-dir parameter needs to point to the .git directory where you checked out your website.\nPro Tip: You could only do a flat/bare clone when initially cloning the repo as you don‚Äôt need your repo in two places.\nMake the script executable:\nchmod +x post-receive You‚Äôre free to exit your remote machine now.\nOn the local side of things you only need to add your remote now. Depending on what type of connection you use with your remote end you need to adjust this. In your local repo directory, add the remote:\ngit remote add iflorian.com ssh://iflorian/path/repo If you now push your code from your local end to the newly added remote end:\ngit push iflorian.com master Your remote end will receive the push, run the post-receive hook and update your webserver.\nWhile I admit that this solution needs a bit of setup and is therefore more complex than the initial GitHub Pages approach, I think it‚Äôs a great and safe way to remote update your webserver!\nCongrats! You‚Äôve made it!\n",
  "wordCount" : "610",
  "inLanguage": "en",
  "datePublished": "2017-06-13T20:05:33-04:00",
  "dateModified": "2017-06-13T20:05:33-04:00",
  "author":{
    "@type": "Person",
    "name": "Florian Harr"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://iflorian.com/setup-git-remote-publishing/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "[self writeBlog];",
    "logo": {
      "@type": "ImageObject",
      "url": "https://iflorian.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://iflorian.com/" accesskey="h" title="[self writeBlog]; (Alt + H)">[self writeBlog];</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://iflorian.com/contact" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://iflorian.com/about" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="https://iflorian.com/euc" title="EUC">
                    <span>EUC</span>
                </a>
            </li>
            <li>
                <a href="https://iflorian.com/" title="My Blog">
                    <span>My Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Setup Git Push To Securly Update Your Website
    </h1>
    <div class="post-meta"><span title='2017-06-13 20:05:33 -0400 -0400'>June 13, 2017</span>&nbsp;¬∑&nbsp;<span>Florian Harr</span>

</div>
  </header> 
  <div class="post-content"><blockquote>
<p><strong>üìù Note</strong>: This post was published in 2017. While the core git concepts remain valid, modern deployment practices often favor SSH keys over passwords, GitHub Actions for automation, or managed deployment platforms. This approach is still functional but represents one of several deployment strategies available today.</p>
</blockquote>
<p>I have recently reported about my new website and the workflow I am using. More specifically about Hugo and GitHub pages.</p>
<p>One task GitHub Pages solves perfectly is the need to publish changes. GitHub Pages does that automatically for you, which is one reason I chose it in first place. Due to the limitations on https with custom domains though, I decided to self host my HTML pages once more.</p>
<p>And so I changed my setup once again. I didn&rsquo;t fully drop GitHub Pages, but I redirect the GitHub Pages site to <a href="https://iflorian.com">https://iflorian.com</a> through their CNAME option under <code>GitHub Pages -&gt; Settings</code> and I serve the same content just from there.</p>
<p>Now this brings back exactly the problem I just said GitHub Pages would solve, so I have to solve this problem myself.</p>
<h2 id="the-easy-path">The Easy Path<a hidden class="anchor" aria-hidden="true" href="#the-easy-path">#</a></h2>
<p>The easiest path I could choose would be to directly push into the publishing folder of my webserver by adding the remote repo as a git remote and push to it. If there wouldn&rsquo;t be this one problem &hellip;</p>
<p>I recently read this article <a href="https://en.internetwache.org/dont-publicly-expose-git-or-how-we-downloaded-your-websites-sourcecode-an-analysis-of-alexas-1m-28-07-2015/">&ldquo;Don&rsquo;t publicly expose .git or how we downloaded your website&rsquo;s sourcecode - An analysis of Alexa&rsquo;s 1M&rdquo;
</a> on Internetwache.org that nicely shows an issue that is often overlooked when having your website under version control.</p>
<p>While my website is publicly available on my GitHub account including the git history, you normally wouldn&rsquo;t want to expose that in case of a normal homepage setup - and after all, if we don&rsquo;t need to, why would we expose our git data on a website?</p>
<p>This is when I found this great writing on this topic: <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-automatic-deployment-with-git-with-a-vps">How To Set Up Automatic Deployment with Git with a VPS
</a></p>
<p>It has two small minor errors, which is why I want to quickly show how to do the same thing and fix what I just mentioned.</p>
<h2 id="pushing-website-updates-via-git">Pushing Website Updates via Git<a hidden class="anchor" aria-hidden="true" href="#pushing-website-updates-via-git">#</a></h2>
<p>First you want to clone your repo somewhere safe on your server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/caffeineflo/repo.git
</span></span></code></pre></div><p>Next, you want to configure git hooks to checkout your HTML files to the directory your webserver is serving:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd /path/repo/.git/hooks/
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi post-receive
</span></span></code></pre></div><p>Now you&rsquo;ve opened the post-receive hook, the script you put in here will be executed post receiving a push:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>git --work-tree<span style="color:#f92672">=</span>/path/www --git-dir<span style="color:#f92672">=</span>/path/repo/.git checkout -f
</span></span></code></pre></div><p>The path you put in under the &ndash;work-tree parameter is your webserver directory and the &ndash;git-dir parameter needs to point to the .git directory where you checked out your website.</p>
<p><strong>Pro Tip:</strong> You could only do a flat/bare clone when initially cloning the repo as you don&rsquo;t need your repo in two places.</p>
<p>Make the script executable:</p>
<pre tabindex="0"><code>chmod +x post-receive
</code></pre><p>You&rsquo;re free to exit your remote machine now.</p>
<p>On the <strong>local side</strong> of things you only need to add your remote now. Depending on what type of connection you use with your remote end you need to adjust this. In your local repo directory, add the remote:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git remote add iflorian.com ssh://iflorian/path/repo
</span></span></code></pre></div><p>If you now push your code from your local end to the newly added remote end:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push iflorian.com master
</span></span></code></pre></div><p>Your remote end will receive the push, run the post-receive hook and update your webserver.</p>
<p>While I admit that this solution needs a bit of setup and is therefore more complex than the initial GitHub Pages approach, I think it&rsquo;s a great and safe way to remote update your webserver!</p>
<p>Congrats! You&rsquo;ve made it!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://iflorian.com/tags/git/">Git</a></li>
      <li><a href="https://iflorian.com/tags/push/">Push</a></li>
      <li><a href="https://iflorian.com/tags/.git/">.Git</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>All rights reserved - 2024</span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script>
(function() {
  'use strict';

  
  const aiContent = document.querySelectorAll('.ai-assisted');
  if (aiContent.length === 0) return;

  
  const STORAGE_KEY = 'ai-indicators-visible';
  const savedState = localStorage.getItem(STORAGE_KEY);
  const isVisible = savedState === 'true';

  
  if (isVisible) {
    document.body.classList.add('ai-indicators-visible');
  }

  
  const button = document.createElement('button');
  button.className = 'ai-toggle-btn';
  button.setAttribute('aria-label', 'Toggle AI content indicators');
  button.setAttribute('aria-pressed', isVisible);
  button.title = isVisible ? 'Hide AI indicators' : 'Show AI indicators';
  button.innerHTML = isVisible ? '‚ú® Hide AI' : '‚ú® Show AI';

  
  button.style.cssText = `
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    padding: 0.5rem 1rem;
    background: rgba(139, 92, 246, 0.9);
    color: white;
    border: none;
    border-radius: 2rem;
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 500;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
    z-index: 1000;
    font-family: inherit;
  `;

  
  button.addEventListener('mouseenter', function() {
    this.style.background = 'rgba(139, 92, 246, 1)';
    this.style.transform = 'scale(1.05)';
  });

  button.addEventListener('mouseleave', function() {
    this.style.background = 'rgba(139, 92, 246, 0.9)';
    this.style.transform = 'scale(1)';
  });

  
  button.addEventListener('click', function() {
    const newState = !document.body.classList.contains('ai-indicators-visible');

    
    document.body.classList.toggle('ai-indicators-visible');

    
    button.setAttribute('aria-pressed', newState);
    button.title = newState ? 'Hide AI indicators' : 'Show AI indicators';
    button.innerHTML = newState ? '‚ú® Hide AI' : '‚ú® Show AI';

    
    localStorage.setItem(STORAGE_KEY, newState);
  });

  
  document.body.appendChild(button);

  
  button.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      this.click();
    }
  });
})();
</script>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
